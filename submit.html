<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Complaint - Jamnipur Portal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header><h1>Online Complaints Portal</h1><p>Gram Panchayat Jamnipur</p></header>
    <main>
        <div class="card" style="max-width: 950px; margin: 0 auto;">
            <div id="submissionSuccess" style="display:none; text-align: center;">
                <h2><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Submission Successful!</h2>
                <div style="background-color: #eaf6ec; padding: 15px; border-radius: 8px; margin-top: 20px;">
                    <p style="margin:0; font-weight:600; color:#155724;"><i class="fas fa-bell"></i> A confirmation has been sent to your mobile.</p>
                </div>
                <p style="font-size: 1.2em; margin-top: 25px;">Your Tracking ID is:</p>
                <div id="trackingIdDisplay" style="font-weight:700; font-size:1.4em; color:var(--accent-color); background-color:var(--light-gray); padding:10px 20px; border-radius:8px; display:inline-block; margin-top:5px; border:1px solid #ccc;"></div>
                <div class="button-container"><a href="index.html" class="btn btn-secondary">Back to Home</a></div>
            </div>
            <form id="complaintForm">
                <h2><i class="fas fa-edit"></i> New Complaint Form</h2>
                <div class="form-group"><label for="fullName">Full Name</label><input type="text" id="fullName" required></div>
                <div class="form-group"><label for="mobile">Mobile Number</label><input type="tel" id="mobile" pattern="[0-9]{10}" placeholder="10-digit mobile number" required></div>
                <div class="form-group"><label for="address">Full Address</label><textarea id="address" rows="3" required></textarea></div>
                <div class="form-group"><label for="category">Complaint Category</label>
                    <select id="category" required>
                        <option value="">-- Select --</option><option value="Water Supply">Water Supply</option><option value="Electricity">Electricity</option><option value="Sanitation & Waste">Sanitation</option>
                        <option value="Roads & Streetlights">Roads</option><option value="Ration System">Ration</option><option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group"><label for="description">Detailed Description</label><textarea id="description" rows="5" required></textarea></div>
                <div class="button-container"><button type="submit" class="btn">Submit Complaint</button></div>
            </form>
        </div>
    </main>
    <footer><p>&copy; 2025 Gram Panchayat Jamnipur</p></footer>
    <script>
        document.getElementById('complaintForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const complaint = {
                id: "JNP" + Date.now().toString().slice(-6), name: document.getElementById('fullName').value, mobile: document.getElementById('mobile').value, address: document.getElementById('address').value,
                category: document.getElementById('category').value, description: document.getElementById('description').value, date: new Date().toLocaleDateString('en-GB'), status: 'pending'
            };
            let complaints = JSON.parse(localStorage.getItem('complaints')) || [];
            complaints.push(complaint);
            localStorage.setItem('complaints', JSON.stringify(complaints));
            document.getElementById('trackingIdDisplay').textContent = complaint.id;
            document.getElementById('complaintForm').style.display = 'none';
            document.getElementById('submissionSuccess').style.display = 'block';
        });
    </script>
</body>
</html>